import ImageViewer from '@/components/ImageViewer';
import pythonArg from '@/public/python_default_arg.png';

## 6. Objects

### 1. Introduction to Objects

ë‹¤ë¥¸ ê¸°ëŠ¥ë“¤ë„ ìˆì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ ê°ì²´ëŠ” ë¬¸ìì—´ì„ ê°’ìœ¼ë¡œ ë§¤í•‘í•©ë‹ˆë‹¤. JS ê°ì²´ëŠ”
ë‹¤ë¥¸ ê°ì²´(í”„ë¡œí† íƒ€ì…)ë¡œë¶€í„° í”„ë¡œí¼í‹°ë¥¼ ìƒì†ë°›ê³  ì´ë¥¼ **prototypal
inheritance**ë¼ í•©ë‹ˆë‹¤.

ì‹ ê¸°í•˜ê²Œë„ í”„ë¡œí¼í‹° ì´ë¦„ìœ¼ë¡œ ë¹ˆ ë¬¸ìì—´ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤:

```js
let a = { '': 1 };
console.log(a['']);
```

ìƒì†ë°›ì§€ ì•Šì€ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¥¼ **own property**ë¼ í•©ë‹ˆë‹¤.

ê° í”„ë¡œí¼í‹°ëŠ” ì•„ë˜ ì„¸ attributeë“¤ì„ ê°€ì§‘ë‹ˆë‹¤:

- writable: í”„ë¡œí¼í‹° ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ì§€
- enumerable: for/in ë£¨í”„ë¡œ ìˆœíšŒí•  ìˆ˜ ìˆëŠ”ì§€
- configurable: í”„ë¡œí¼í‹°ë¥¼ ì‚­ì œí•˜ê±°ë‚˜ attributeë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ”ì§€

### 2. Creating Objects

ì¤‘ìš”í•œ ë¬¸ì¥ì´ë¼ê³  ìƒê°í•´ì„œ ê·¸ëŒ€ë¡œ ê¸ì–´ì™”ì–´ìš”:

> Remember: almost all objects have a **prototype**, but only a relatively small
> number of objects have `prototype` property. It is these objects with
> `prototype` properties that define the **prototypes** for all the other
> objects.

Object.createì˜ ì¸ìëŠ” ìƒì„±ëœ ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…ì´ ë©ë‹ˆë‹¤:

```js
let obj1 = {};
console.log(String(obj1));

let obj2 = Object.create(null);
console.log(String(obj2));
```

### 3. Querying and Setting Properties

ì¼ë°˜ ê°ì²´ê°€ ì—°ê´€ ë°°ì—´(ë”•ì…”ë„ˆë¦¬)ë¡œ ìì£¼ í™œìš©ë˜ê¸°ëŠ” í•˜ì§€ë§Œ Map í´ë˜ìŠ¤ê°€ ë” ë‚˜ì€
ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.

ê°™ì€ ì´ë¦„ì˜ í”„ë¡œí¼í‹°ê°€ í”„ë¡œí† íƒ€ì… ì²´ì¸ì˜ ë‹¤ë¥¸ ê³³ì— ìœ„ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```js
let a = { x: 1 };
let b = Object.create(a);
console.log(a, b);

b.x = 2;
console.log(a, b);
```

ìœ„ ì½”ë“œì™€ ê°™ì€ íŠ¹ì§• ë•ë¶„ì— ìƒì†ë°›ì€ í”„ë¡œí¼í‹°ë¥¼ ì„ íƒì ìœ¼ë¡œ overrideí•  ìˆ˜
ìˆë„ë¡í•©ë‹ˆë‹¤. ë‹¤ë§Œ setter ë©”ì„œë“œ ê´€ë ¨í•´ì„œ ì˜ˆì™¸ê°€ ìˆìŠµë‹ˆë‹¤:

```js
let parent = {
  set val(x) {
    this.y = 1;
  },
};

let child = Object.create(parent);

child.val = 2; // childì— í”„ë¡œí¼í‹°ê°€ ì¶”ê°€ë˜ì§€ ì•Šê³  parentì˜ setterê°€ í˜¸ì¶œë©ë‹ˆë‹¤.
console.log(parent, child); // setterì—ì„œ ì¶”ê°€í•œ í”„ë¡œí¼í‹°ëŠ” childì— ì¶”ê°€ë©ë‹ˆë‹¤.
```

### 4. Deleting Properties

delete ì—°ì‚°ìëŠ” ê°ì²´ ìì‹ ì˜ í”„ë¡œí¼í‹°ë§Œ ì‚­ì œí•©ë‹ˆë‹¤.

ì•”ë¬µì ìœ¼ë¡œ/ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ëœ ë³€ìˆ˜ë“¤ì˜ ì°¨ì´ê°€ delete ì—°ì‚°ìì— ê´€ë ¨í•˜ì—¬ ìˆìŠµë‹ˆë‹¤:

```js
// ì›ë˜ëŠ” varë¡œ ì„ ì–¸í•œ ê²½ìš° ì‚­ì œê°€ ì•ˆë˜ì–´ì•¼í•˜ëŠ”ë°
// ì½˜ì†” ì»´í¬ë„ŒíŠ¸ë¥¼ evalë¡œ êµ¬í˜„í•´ì„œ ì°¨ì´ê°€ ìƒê¸°ëŠ” ê²ƒ ê°™ì•„ìš” (í™•ì¸ í•„ìš”)
// ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì‹¤í–‰í•´ë³´ì„¸ìš” :(
var a = 10;
console.log(globalThis.a);
delete globalThis.a;
console.log(globalThis.a);

b = 20;
console.log(globalThis.b);
delete globalThis.b;
console.log(globalThis.b);
```

### 5. Testing Properties

```js
let a = Object.create({ x: 1 });
a.y = 2;

console.log('x' in a);
console.log(a.hasOwnProperty('x'));

// ìŠ¤ìŠ¤ë¡œì˜ enumerableí•œ í”„ë¡œí¼í‹°ì¸ì§€
console.log(a.propertyIsEnumerable('x'));
console.log(a.propertyIsEnumerable('y'));
```

í”„ë¡œí¼í‹° ìœ ë¬´ í™•ì¸ì—ì„œ in ì—°ì‚°ìì™€ !== undefinedì˜ ì°¨ì´:

```js
let a = { x: undefined };
console.log('x' in a, a.x !== undefined);
console.log('y' in a, a.y !== undefined);
```

### 6. Enumerating Properties

```js
let a = { x: 1 };
let b = Object.create(a);
b.y = 2;
b[Symbol()] = 3;

// own&inherited enumerable string
for (i in b) console.log(i);
// own enumerable string
console.log(Object.keys(b));
// own (non)enumerable string
console.log(Object.getOwnPropertyNames(b));
// own (non)enumerable symbols
console.log(Object.getOwnPropertySymbols(b));
// own (non)enumeratble string&symbols
console.log(Reflect.ownKeys(b));
```

ê°ì¢… ë©”ì„œë“œë“¤ì˜ í”„ë¡œí¼í‹° ìˆœíšŒ ìˆœì„œì…ë‹ˆë‹¤:

1. 0ì´ìƒì˜ ìì—°ìˆ˜ë¥¼ ìˆœì„œëŒ€ë¡œ
1. ë¬¸ìì—´ì€ ì¶”ê°€í•œ ìˆœì„œëŒ€ë¡œ(ë¦¬í„°ëŸ´ì— ìˆëŠ” ìˆœì„œëŒ€ë¡œ)
1. ì‹¬ë³¼ë„ ì¶”ê°€í•œ ìˆœì„œëŒ€ë¡œ

for-inì˜ ìˆœì„œëŠ” í‘œì¤€ì— ìì„¸íˆ ëª…ì‹œë˜ì–´ìˆì§„ ì•Šë‹¤ëŠ”ë°,,, ìµœê·¼ì— ìˆ˜ì •ëœ ê²ƒ
ê°™ìŠµë‹ˆë‹¤:

https://stackoverflow.com/questions/30076219/does-es6-introduce-a-well-defined-order-of-enumeration-for-object-properties

### 7. Extending Objects

ê°ì²´ì˜ ë³µì‚¬ê°€ ìì£¼ ìˆì–´ì„œ ES6ì—ì„œ `Object.assign()`ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ë‘ë²ˆì§¸ ì´í›„
ì¸ìë“¤ì˜ enumerable/own/string+symbol í”„ë¡œí¼í‹°ë“¤ì„ ì²«ë²ˆì§¸ ì¸ì ê°ì²´ë¡œ
ë³µì‚¬í•©ë‹ˆë‹¤.

### 8. Serializing Objects

```js
console.log(JSON.stringify([NaN, Infinity, -Infinity]));
console.log(JSON.parse(JSON.stringify(new Date()))); // parse í›„ì—ë„ ë¬¸ìì—´ì…ë‹ˆë‹¤.
```

stringifyëŠ” own enumerable propertyë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### 9. Object Methods

Object.prototypeì—ì„œ ìƒì†ë˜ëŠ” ë©”ì„œë“œë“¤:

```js
let point = {
  x: 3,
  y: 4,

  toString() {
    return `(${this.x}, ${this.y})`;
  },

  toLocaleString() {
    return `(${this.x.toLocaleString()}, ${this.y.toLocaleString()})`;
  },

  valueOf() {
    return Math.hypot(this.x, this.y);
  },

  // Object.prototypeì—ëŠ” ì—†ì§€ë§Œ JSON.stringifyê°€ ë´…ë‹ˆë‹¤
  toJSON() {
    return this.toString();
  },
};

console.log(String(point), Number(point), JSON.stringify(point));
```

### 10. Extended Object Literal Syntax

ì‹¬ë³¼ì€ opaque valueì…ë‹ˆë‹¤:

> In computer science, an opaque data type is a data type whose concrete data
> structure is not defined in an interface.
>
> https://en.wikipedia.org/wiki/Opaque_data_type

Symbolì€ ê°ì²´ê°€ ì•„ë‹Œ ì›ì‹œê°’ì´ê³  `Symbol()`ì€ ìƒì„±ì í•¨ìˆ˜ê°€ ì•„ë‹Œ íŒ©í† ë¦¬
í•¨ìˆ˜ì…ë‹ˆë‹¤.

Symbolì´ ê°’ì„ ì™„ì „íˆ ìˆ¨ê¸¸ ìˆ˜ëŠ” ì—†ëŠ”ë° `Object.getOwnPropertySymbols()`ë¡œ ì‹¬ë³¼ì„
ì–»ì–´ë‚´ê³  í”„ë¡œí¼í‹°ë¥¼ ìˆ˜ì • í˜¹ì€ ì‚­ì œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í”„ë¡œí¼í‹°ê°€ ë®ì–´ì”Œì›Œì§€ëŠ”
ì‚¬ê³  ë°©ì§€(?)ì˜ ëª©ì ìœ¼ë¡œ ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ì•„ìš”.

ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìëŠ” enumerable own í”„ë¡œí¼í‹°ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤. Mdn ë¬¸ì„œì— ìŠ¤í”„ë ˆë“œ
ì—°ì‚°ìì™€ `Object.assign`ê³¼ì˜ ì°¨ì´ì— ëŒ€í•œ ì¬ë°ŒëŠ” ì˜ˆì œ ì½”ë“œê°€ ìˆì–´ì„œ ê°€ì ¸ì™”ì–´ìš”.
ì „ìëŠ” setterë¥¼ í˜¸ì¶œí•˜ì§€ë§Œ í›„ìëŠ” ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤.

> ```js
> const objectAssign = Object.assign(
>   {
>     set foo(val) {
>       console.log(val);
>     },
>   },
>   { foo: 1 },
> );
> // Logs "1"; objectAssign.foo is still the original setter
>
> const spread = {
>   set foo(val) {
>     console.log(val);
>   },
>   ...{ foo: 1 },
> };
> // Nothing is logged; spread.foo is 1
> ```
>
> https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax

ì•„ë˜ ë‘ ì½”ë“œëŠ” ë™ì¼í•©ë‹ˆë‹¤. í›„ìê°€ ë” ê°„ëµí•´ìš”:

```js
// @noexec
let square = {
  area: function () {
    return this.side ** 2;
  },
  side: 10,
};

square = {
  area() {
    return this.side ** 2;
  },
  size: 10,
};
```

getterê°€ ì •ì˜ë˜ëŠ” ìœ„ì¹˜ì™€ enumerableí•¨ì— ëŒ€í•œ ì°¸ê³  ë§í¬:

https://stackoverflow.com/questions/34517538

## 7. Arrays

### 1. Creating Arrays

Spread operatorë¥¼ í†µí•œ ë°°ì—´ ìƒì„±ì€ ëª¨ë“  ì´í„°ëŸ¬ë¸” ê°ì²´ì—ì„œ ê°€ëŠ¥í•´ìš”:

```js
console.log([...'0123456789ABCDEF']);

// ì¤‘ë³µ ì›ì†Œ ì—†ì• ê¸°
console.log([...new Set([...'hello world'])]);
```

Array ìƒì„±ìì— í•˜ë‚˜ì˜ ìˆ«ìë¥¼ ì „ë‹¬í•˜ë©´ length ì†ì„±ì´ í•´ë‹¹ ìˆ«ìë¡œ ì„¤ì •ëœ
array(?)ê°€ ë°˜í™˜ë©ë‹ˆë‹¤:

```js
let a = new Array(10);
console.log(a.length, a[0], 0 in a);

// ì´ëŸ´ ë•Œ ë§ê³  ì–¸ì œ ì“°ëŠ”ì§€ëŠ” ì €ëŠ” ì˜ ëª¨ë¥´ê² ë„¤ìš” ã…,,,
console.log([...Array(10).keys()].join(' '));
```

`Array.of`ëŠ” ì „ë‹¬ëœ ì¸ìë“¤ì„ ê°€ì§€ëŠ” ë°°ì—´ì„ ë°˜í™˜í•˜ëŠ” íŒ©í† ë¦¬ ë§¤ì„œë“œì—ìš”:

```js
console.log(Array.of(1));
console.log(Array.of(1, 2, 3));
```

`Array.form`ì€ ì´í„°ëŸ¬ë¸”ì´ë‚˜ ìœ ì‚¬ ë°°ì—´ì„ ë°°ì—´ë¡œ ë³€í™˜í•˜ëŠ” íŒ©í† ë¦¬ ë©”ì„œë“œë¡œ ìŠ¤í”„ë ˆë“œ
ì—°ì‚°ìì™€ ìœ ì‚¬í•˜ê²Œ ë™ì‘í•´ìš”. **Web APIì—ì„œ ì¢…ì¢… ìœ ì‚¬ë°°ì—´ì„ ë°˜í™˜í•˜ê¸°ì— ì´ ë•Œ
ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë¼ìš”**. ë‘ë²ˆì§¸ ì¸ìë¡œ í•¨ìˆ˜ë¥¼ ê±´ë„¤ì¤„ ìˆ˜ ìˆëŠ”ë° ìƒí™©ì— ë”°ë¼ ë°°ì—´ì˜
ìƒì„±ê³¼ ë§¤í•‘ì„ í•œë²ˆì— í•  ìˆ˜ ìˆì–´ ë°°ì—´ ìƒì„± í›„ ë³„ë„ë¡œ mapì„ í•˜ëŠ” ê²ƒë³´ë‹¤
íš¨ìœ¨ì ì…ë‹ˆë‹¤:

```js
let arraylike = { 0: 1, 1: 2, 2: 3, length: 3 };
console.log(Array.from(arraylike, (x) => 2 * x));
```

### 2. Reading and Writing Array Elements

ë°°ì—´ ì¸ë±ìŠ¤(array index)ì™€ ê°ì²´ì˜ í”„ë¡œí¼í‹°ëª…(object property name)ì„ êµ¬ë¶„í•˜ëŠ”
ê²ƒì´ ë„ì›€ì´ ë©ë‹ˆë‹¤. ëª¨ë“  ë°°ì—´ ì¸ë±ìŠ¤ëŠ” í”„ë¡œí¼í‹°ëª…ì´ì§€ë§Œ, í”„ë¡œí¼í‹°ëª… ì¤‘ì— 0ì´ìƒ
2^32-1ë¯¸ë§Œì˜ ì •ìˆ˜ë§Œ ì¸ë±ìŠ¤ë¡œ ê¸°ëŠ¥í•  ìˆ˜ ìˆì–´ìš”.

https://stackoverflow.com/questions/6154989/maximum-size-of-an-array-in-javascript

### 3. Sparse Arrays

ë°°ì—´ í‘œí˜„ì‹ì—ì„œ ì‰¼í‘œ ì‚¬ì´ê°€ ë¹„ì–´ìˆìœ¼ë©´ í¬ì†Œ ë°°ì—´ì´ ë©ë‹ˆë‹¤. undefinedì¸ ìš”ì†Œê°€
ìˆëŠ” ê²ƒê³¼ í¬ì†Œ ë°°ì—´ì¸ ê²ƒì€ ë‹¬ë¼ìš”:

```js
let a = [undefined, , undefined];
console.log(0 in a, 1 in a);
console.log(a[0], a[1]);
```

í¬ì†Œ ë°°ì—´ì˜ length í”„ë¡œí¼í‹° ê°’ì€ ë°°ì—´ ìš”ì†Œì˜ ê°œìˆ˜ë³´ë‹¤ í½ë‹ˆë‹¤:

```js
let a = new Array(5); // í¬ì†Œ ë°°ì—´ì…ë‹ˆë‹¤.
console.log(a.length);

a = [];
console.log(a.length);

a[1000] = 0;
console.log(a.length);
```

í¬ì†Œ ë°°ì—´ì´ í¬ì†Œ(sparse)í• ìˆ˜ë¡ ëŠë¦¬ì§€ë§Œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

### 4. Array Length

Invariant: ë°°ì—´ ìš”ì†Œì˜ ì¸ë±ìŠ¤ëŠ” í•­ìƒ lengthê°’ ë¯¸ë§Œì…ë‹ˆë‹¤.

```js
a = [1, 2, 3, 4, 5];
a.length = 3;
console.log(a);
```

### 5. Adding and Deleting Array Elements

ì¬ë¯¸ë¡œë§Œ ë³´ëŠ” pushì™€ a[a.length]ì˜ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸:

```js
let ITER = 123456;

let arr = new Array();
let t = performance.now();
for (let i = 0; i < ITER; i++) {
  arr[arr.length] = i;
}

console.log(performance.now() - t);

arr = new Array();
t = performance.now();
for (let i = 0; i < ITER; i++) {
  arr.push(i);
}

console.log(performance.now() - t);
```

https://stackoverflow.com/questions/6772757/using-the-push-method-or-length-when-adding-to-array

ìš”ì†Œë¥¼ deleteí•œë‹¤ê³  ê¸¸ì´ê°€ ë‹¬ë¼ì§€ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤:

```js
let a = [1, 2, 3];
delete a[2];
console.log(2 in a, a[2], a.length);
```

### 6. Iterating Arrays

ë§¨ë‚  `Object.entries(arr)`ë¡œ ì¼ëŠ”ë° ë°°ì—´ì´ë©´ ì•„ë˜ì²˜ëŸ¼ ë°”ë¡œ ì“¸ ìˆ˜ë„ ìˆë„¤ìš”:

```js
for (const [k, v] of [...'abcdef'].entries()) console.log(k, v);
```

> ë°°ì—´ì— ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” í‚¤ë§Œ í¬í•¨í•˜ëŠ” Object.keys()ì™€ ë‹¬ë¦¬, keys() ë°˜ë³µìëŠ”
> ëˆ„ë½ëœ ì†ì„±ì„ ë‚˜íƒ€ë‚´ëŠ” ë¹ˆ ê³µê°„ì„ ë¬´ì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>
> https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/keys

### 7. Multidimensional Arrays

> í¬ì†Œ ë°°ì—´ì˜ ë¹ˆ ìŠ¬ë¡¯ì€ ë°°ì—´ ë©”ì„œë“œ ê°„ì— ì¼ê´€ì„± ì—†ì´ ë™ì‘í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ
> ì˜¤ë˜ëœ ë©”ì„œë“œ(forEach ë“±)ëŠ” ë¹ˆ ìŠ¬ë¡¯ì„ ê±´ë„ˆë›°ëŠ” ë°˜ë©´, ìµœì‹  ë©”ì„œë“œ(for/of ë“±)ëŠ”
> ë¹ˆ ìŠ¬ë¡¯ì„ undefinedë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
>
> https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array
>
> ```js
> let a = [1, , 3];
> a.forEach((i) => console.log(i));
> for (const i of a) console.log(i);
> ```

#### Array Iterator Methods

```js
let a = [1, , 3];
a.forEach(
  // forEach ì™¸ì— ë‹¤ë¥¸ ëŒ€ë¶€ë¶„ì˜ ë©”ì„œë“œë“¤ë„ val, idx, arrì„ í•¨ìˆ˜ì— ê±´ë„¤ì¤ë‹ˆë‹¤.
  function (val, idx, arr) {
    console.log(val, idx, arr, this);
  },
  // ë‹¤ë¥¸ ëŒ€ë¶€ë¶„ì˜ ë©”ì„œë“œë“¤ë„ ë‘ë²ˆì§¸ ì¸ìì˜ ê°’ì´ (ìˆë‹¤ë©´) í•¨ìˆ˜ ë‚´ë¶€ì˜ thisê°€ ë©ë‹ˆë‹¤.
  { val: 'hello' },
);
```

forEachì™€ forë¬¸ì€ ìœ ì‚¬í•˜ì§€ë§Œ forë¬¸ì˜ breakì— ëŒ€ì‘ë˜ëŠ” ë¬¸ë²•ì€ ì—†ìŠµë‹ˆë‹¤.

filter í•¨ìˆ˜ëŠ” predicate í•¨ìˆ˜ë¥¼ ë°›ì•„ìš”:

https://stackoverflow.com/questions/3230944/what-does-predicate-mean-in-the-context-of-computer-science

í¬ì†Œ ë°°ì—´ì˜ ê°„ê²© ì—†ì• ê¸° ì˜ˆì œ:

```js
console.log([1, , 2, , , 3, 4, , 5, , , 6, , ,].filter(() => true));
```

ìˆ˜í•™ì  ê´€ìŠµ?ìœ¼ë¡œ ì¸í•´ ë¹ˆ ë°°ì—´ì— ëŒ€í•´ì„œ everyì™€ someì˜ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```js
console.log([].every((x) => true));
console.log([].some((x) => true));
```

reduce í•¨ìˆ˜ëŠ” ì²«ë²ˆì§¸ ì¸ìë¡œ ì§€ê¸ˆê¹Œì§€ì˜ ëˆ„ì ëœ ê²°ê³¼ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. í•¨ìˆ˜ì— initial
valueë¥¼ ì „ë‹¬í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì²«ë²ˆì§¸ ìš”ì†Œì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```js
let ret = [1, , , 2, , , 3].reduce((acc, val, idx, arr) => {
  console.log(acc, val, idx, arr);
  return acc + val;
}, 0); // ì¸ì 0ì„ ì§€ì›Œë³´ì„¸ìš”

console.log(ret);
```

<br />

```js
[].reduce((acc, val) => acc + val);
```

reduceRightëŠ” ì¸ë±ìŠ¤ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. (ì™œ ì¨ë³¸ ì ì´ ì—†ì§€,,,)

reduce/reduceRightëŠ” thisë¥¼ ì„¤ì •í•˜ëŠ” ì¸ìê°€ ì—†ìŠµë‹ˆë‹¤. ì„¤ì •í•´ì•¼ëœë‹¤ë©´ ë‚˜ì¤‘ì— ë°°ìš¸
bindë¥¼ ì“°ë©´ ë¼ìš”.

#### Flattening arrays with flat() and flatMap()

```js
let arr = [1, [2, [3, [4]]]];
console.log(arr.flat());
console.log(arr.flat(1));
console.log(arr.flat(2));
console.log(arr.flat(3));
```

`a.flatMap(f)`ëŠ” `a.map(f).flat()`ê³¼ ê°™ì§€ë§Œ ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì…ë ¥ ë°°ì—´ì˜ ê°
ìš”ì†Œë§ˆë‹¤ N(>=0)ê°œì˜ ìš”ì†Œë¥¼ ëŒ€ì‘ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ ì¼ë°˜í™”ëœ `map`ìœ¼ë¡œ ìƒê°í•  ìˆ˜
ìˆì–´ìš”:

```js
let phrases = ['hello world!', 'hello visitors!'];
console.log(phrases.flatMap((x) => x.split(' ')));

let numbers = [-2, -1, 0, 1, 2];
console.log(numbers.flatMap((x) => (x < 0 ? [] : Math.sqrt(x))));
```

#### Adding arrays with concat()

ê¸°ì¡´ ë°°ì—´ì„ ë°”ê¾¸ì§€ ì•Šì•„ìš”.

```js
console.log([1, 2].concat([3, [4]], 5));
```

#### Stacks and Queues with push(), pop(), shift(), and unshift()

ì €ëŠ” shiftë‘ unshiftë¥¼ ìê¾¸ ê¹Œë¨¹ì–´ìš”:

```js
let a = [1, 2, 3];
console.log(a.shift());
a.unshift(4, 5);
console.log(a);
```

#### Subarrays with slice(), splice(), fill(), and copyWithin()

```js
let a = [1, 2, 3, 4, 5];
console.log(a.slice(1, 3));
console.log(a.slice(1));
console.log(a.slice(-3, -1));
```

spliceëŠ” start index, length, ì‚½ì…í•  ìš”ì†Œë“¤ì„ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤:

```js
let a = [1, 2, 3, 4, 5];
console.log(a.splice(1, 2), a);
console.log(a.splice(0, 2, [1, 2], 3), a);
```

<br />

```js
let a = new Array(5);
console.log(a.fill(0));
console.log(a.fill(9, 1));
console.log(a.fill(8, 2, -1));
```

copyWithinì€ ë°°ì—´ ì¼ë¶€ë¶„ì„ ë°°ì—´ì˜ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì˜¯ê²¨ìš”. ê³ ì„±ëŠ¥ ë©”ì„œë“œë¡œ ì„¤ê³„ë˜ì—ˆê³ 
ë‚˜ì¤‘ì— ë°°ìš¸ typed arrayì— ìœ ìš©í•©ë‹ˆë‹¤. Cì˜ memmove()ë¥¼ ë³¸ë•„ë‹¤ê³  í•˜ë„¤ìš”. ëª©ì ì§€
ì¸ë±ìŠ¤, ì‹œì‘ ì¸ë±ìŠ¤(ì—†ìœ¼ë©´ 0), ê°œìˆ˜ ì¸ë±ìŠ¤(ì—†ìœ¼ë©´ ë°°ì—´ ê¸¸ì´) ìˆœìœ¼ë¡œ ì¸ìë¥¼
ë°›ì•„ìš”:

```js
let a = [1, 2, 3, 4, 5];
console.log(a.copyWithin(1));
console.log(a.copyWithin(2, 3));
console.log(a.copyWithin(0, -2));
```

#### Array Searching and Sorting Methods

```js
let a = [1, 2, 3, 2, 1];
console.log(a.indexOf(2));
console.log(a.lastIndexOf(2));
console.log(a.indexOf(4));
```

indexOfì˜ ë‘ë²ˆì§¸ ì¸ìëŠ” íƒìƒ‰ì„ ì‹œì‘í•  ì¸ë±ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤:

```js
let findAll = (a, x) => {
  let results = [];
  let pos = 0;
  while (pos < a.length) {
    pos = a.indexOf(x, pos);
    if (pos === -1) break;
    results.push(pos++);
  }
  return results;
};

console.log(findAll([1, 2, 3, 2, 1], 2));
```

includes ë©”ì„œë“œëŠ” NaN ì²˜ë¦¬ë¥¼ í•©ë‹ˆë‹¤:

```js
let a = [1, NaN, 3];
console.log(a.indexOf(NaN));
console.log(a.includes(NaN));
```

https://stackoverflow.com/questions/66743472/why-does-nan-includesnan-return-true-in-javascript

`sort`ëŠ” ìš”ì†Œë¥¼ ë¬¸ìì—´ë¡œ ë°”ê¿”ì„œ ì‚¬ì „ìˆœìœ¼ë¡œ ì •ë ¬í•©ë‹ˆë‹¤. ëŒ€ì‹  undefinedëŠ”
ë§ˆì§€ë§‰ìœ¼ë¡œ ê°„ëŒ€ìš”:

```js
console.log([undefined, 9, 10, '200'].sort());
console.log([33, 4, 1111, 222].sort());
console.log([33, 4, 1111, 222].sort((a, b) => a - b));
```

#### Array to String Conversions

Array ê°ì²´ì˜ toStringì€ ì¸ì ì—†ëŠ” joinì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤:

```js
console.log([1, 2, 3].toString());
console.log([, , ,].toString());

let a = { toLocaleString: () => 'aaa' };
let b = { toLocaleString: () => 'bbb' };
console.log([a, b].toString());
console.log([a, b].toLocaleString());
```

#### Static Array Functions

> Array.isArray()ëŠ” í”„ë¡œí† íƒ€ì… ì²´ì¸ì— Array.prototypeì´ ìˆì§€ë§Œ ì‹¤ì œ ë°°ì—´ì´ ì•„ë‹Œ
> ê°ì²´ë¥¼ ê±°ë¶€í•©ë‹ˆë‹¤. instanceof ArrayëŠ” ì´ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.
>
> https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray

> Determining with absolute accuracy whether or not a JavaScript object is an
> array
>
> https://web.mit.edu/jwalden/www/isArray.html

### 9. Array-Like Objects

ë°°ì—´ ê´€ë ¨ëœ ë§ì€ ì•Œê³ ë¦¬ì¦˜ë“¤ì´ ê°ì²´ê°€ length í”„ë¡œí¼í‹°ì™€ 0 ì´ìƒ ì •ìˆ˜ í”„ë¡œí¼í‹°ë“¤ì„
ê°€ì§€ê¸°ë§Œí•´ë„ ì˜ ë™ì‘í•©ë‹ˆë‹¤:

```js
let a = { 0: 'a', 1: 'b', 2: 'c', length: 3 };
console.log(Array.prototype.join.call(a, '+'));
```

Client-side JSì—ì„œ ë§ì€ HTML document ë©”ì„œë“œë“¤ì´ ìœ ì‚¬ ë°°ì—´ ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

### 10. Strings as Arrays

```js
let a = 'Javascript';
console.log(Array.prototype.join.call(a, ' '));

// stringì€ immutableí•©ë‹ˆë‹¤
console.log(Array.prototype.push.call(a, '!'));
```

## 8. Functions

í˜¸ì¶œëœ í•¨ìˆ˜ëŠ” ì „ë‹¬ë°›ì€ ì¸ì ì™¸ì—ë„ **invocation context**ë¼ëŠ” ê°’ì„ ë³„ë„ë¡œ
ê°€ì ¸ìš”. `this` í‚¤ì›Œë“œì˜ ê°’ì´ ë°”ë¡œ ì´ ê°’ì´ì—ìš”. í•¨ìˆ˜ê°€ ê°ì²´ë¥¼ í†µí•´(ê°ì²´ì˜
ë©”ì„œë“œë¡œì„œ) í˜¸ì¶œë˜ë©´ í•´ë‹¹ ê°ì²´ê°€ invocation contextê°€ ë©ë‹ˆë‹¤.

ë”°ë¼ì„œ `this`ëŠ” ì•”ë¬µì ìœ¼ë¡œ ì „ë‹¬ëœ í•¨ìˆ˜ ì¸ìë¡œë„ ë³¼ ìˆ˜ ìˆì–´ìš”. ì´ëŸ° ê´€ì ì´ ë³´ë‹¤
ëª…í™•í•œ íŒŒì´ì¬ì˜ `self`ë¥¼ ì°¸ê³ í•´ë³´ì„¸ìš”:

https://stackoverflow.com/questions/2709821/what-is-the-purpose-of-the-self-parameter-why-is-it-needed

### 1. Defining Functions

í•¨ìˆ˜ ì„ ì–¸ë¬¸ì€ í˜¸ì´ìŠ¤íŒ…ë©ë‹ˆë‹¤. í•¨ìˆ˜ í‘œí˜„ì‹ì€ í˜¸ì´ìŠ¤íŒ…ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤:

```js
f();
g();

function f() {
  console.log('f');
}
let g = () => console.log('g');
```

í™”ì‚´í‘œí•¨ìˆ˜ëŠ” ì •ì˜ëœ í™˜ê²½ì˜ this ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©° `prototype` í”„ë¡œí¼í‹°ë¥¼
ê°€ì§€ì§€ ì•Šì•„ í´ë˜ìŠ¤ ìƒì„±ìë¡œì„œ ì‚¬ìš©ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

```js
// ì¼ë°˜ ê°ì²´ ì˜ˆì œ
const obj = {
  i: 10,
  b: () => this.i,
  c() {
    return this.i;
  },
};

console.log(obj.b(), obj.c());

let { b, c } = obj;
console.log(b(), c());

// í´ë˜ìŠ¤ ì˜ˆì œ
class A {
  i = 10;
  d = () => this.i;
  e() {
    return this.i;
  }
}

let a = new A();
console.log(a.d(), a.e());

let { d, e } = a;
console.log(d());
console.log(e());
```

í™”ì‚´í‘œ í•¨ìˆ˜ì˜ `this`ê°’ì´ ì¼ë°˜ ê°ì²´ì™€ í´ë˜ìŠ¤ì—ì„œ ë‹¤ë¥¸ ì´ìœ :

> Because a class's body has a this context, arrow functions as class fields
> close over the class's this context, and the this inside the arrow function's
> body will correctly point to the instance (or the class itself, for static
> fields). However, because it is a **closure, not the function's own binding**,
> the value of this will not change based on the execution context.
>
> https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions

### 2. Invoking Functions

í•¨ìˆ˜ëŠ” ë‹¤ìŒ ë°©ë²•ë“¤ë¡œ í˜¸ì¶œë  ìˆ˜ ìˆì–´ìš”:

- í•¨ìˆ˜ë¡œ
- ë©”ì„œë“œë¡œ
- ìƒì„±ìë¡œ
- callì´ë‚˜ apply ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ê°„ì ‘ì ìœ¼ë¡œ
- JSì— ì˜í•´ ì•”ë¬µì ìœ¼ë¡œ
  - get/set
  - toString, valueOf
  - iteration ê´€ë ¨ í•¨ìˆ˜ë“¤
  - tagged template literal,
  - Proxyë“±...

thisì— í•´ë‹¹í•˜ëŠ” ê°ì²´ê°€ ì—†ì„ ë•Œ strict modeë©´ undefined, ì•„ë‹ˆë©´ ì „ì—­ ê°ì²´ê°€ ë¼ìš”:

```js
// ì•„ë˜ ì˜ˆì œëŠ” í˜„ì¬ ë¸”ë¡œê·¸ìƒì—ì„œ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ :(
// ìƒìœ„ì— JS ìƒŒë“œë°•ìŠ¤ê°€ ìˆì–´ì„œ strict modeì— ìƒê´€ì—†ì´ thisê°€ í•­ìƒ windowê°€ ë¼ìš”.
// ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì‹¤í–‰í•´ë³´ì„¸ìš” ğŸ™‡â€â™‚ï¸ğŸ™‡â€â™‚ï¸

// 'use strict'
const isStrict = (function () {
  return !this;
})();

console.log(isStrict);
```

í•¨ìˆ˜ê°€ thisë¥¼ ë°˜í™˜í•˜ë„ë¡í•˜ë©´ **method chaining** ìŠ¤íƒ€ì¼ì˜ APIë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”:

```js
class Square {
  x(val) {
    this.x = val;
    return this;
  }
  y(val) {
    this.y = val;
    return this;
  }
  outline(color) {
    this.outline = color;
    return this;
  }
  toString() {
    return `Square\n - x: ${this.x}\n - y: ${this.y}\n - outline: ${this.outline}`;
  }
}

console.log(String(new Square().x(100).y(100).outline('red')));
```

ì¤‘ì²© í•¨ìˆ˜ì˜ thisëŠ” ì™¸ë¶€ ìŠ¤ì½”í”„ì˜ thisê°’ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆì–´ìš”. ì±… ë§ë¡œëŠ” JSì˜
ê²°í•¨ìœ¼ë¡œ ì—¬ê²¨ì§„ë‹¤ê³  í•˜ë„¤ìš”:

```js
let o = {
  m: function () {
    console.log(this + '');
    let self = this;

    function f() {
      console.log(this + '');
      console.log(self + '');
    }

    f();
  },
  toString() {
    return '[object O]';
  },
};

o.m();
```

ìœ„ ì½”ë“œì²˜ëŸ¼ selfì™€ ê°™ì€ ë³„ë„ì˜ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, bind ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜,
í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

new í‚¤ì›Œë“œë¥¼ ë¶™ì´ë©´ íƒ€ê²Ÿ í•¨ìˆ˜ëŠ” <strong>ìƒì„±ì(constructor)</strong>ë¡œ ê¸°ëŠ¥í•˜ê³ 
ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œê³¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬ë¼ìš”.

- ìƒì„±ìì˜ `prototype` í”„ë¡œí¼í‹°ë¥¼ ìƒì†ë°›ëŠ” ê°ì²´ê°€ ìƒì„±ë˜ê³  í•¨ìˆ˜ ë³¸ë¬¸ì˜ `this`ê°€
  ì´ ê°ì²´ë¥¼ ê°€ë¥´í‚µë‹ˆë‹¤.
- í•¨ìˆ˜ ë³¸ë¬¸ì˜ returnì—ì„œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ë©´ ê·¸ ê°ì²´ê°€ ë°˜í™˜ë˜ê³ , ê°ì²´ê°€ ì•„ë‹Œê±¸
  ë°˜í™˜í•˜ë©´ í•´ë‹¹ returnë¬¸ì€ ë¬´ì‹œë©ë‹ˆë‹¤.

### 3. Function Arguments and Parameters

```js
function getPropertyNames(o, a = []) {
  for (let property in o) a.push(property);
  return a;
}

console.log(getPropertyNames({ a: 1 }));
console.log(getPropertyNames(document));
```

ì¸ìì˜ ê¸°ë³¸ê°’(ìœ„ ì½”ë“œì—ì„œëŠ” ë¹ˆ ë°°ì—´ `a`)ì€ í˜¸ì¶œë§ˆë‹¤ ì´ˆê¸°í™”ë˜ê³  ì´ëŠ” íŒŒì´ì¬ê³¼ì˜
ì°¨ì´ì ì´ì—ìš”.

<ImageViewer
  src={pythonArg}
  alt="íŒŒì´ì¬ ì¸ì íŠ¹"
  widthPercentage="50%"
  priority
  href="https://twitter.com/holdenmatt/status/1774866242282672365"
/>

ê¸°ë³¸ê°’ì´ ìƒìˆ˜ì¼ í•„ìš”ëŠ” ì—†ê³  ë‹¤ë¥¸ ì¸ìê°’ì— ì˜ì¡´ì ì¸ ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤:

```js
let rec = (width, height = width) => ({ width, height });
console.log(rec(1));
```

Rest parameter ì˜ˆì‹œ:

```js
// Edge caseì¸ ë¹ˆ ë°°ì—´ì„ ì¸ì ê¸°ë³¸ê°’ì„ ì£¼ì–´ í•´ê²°í•œê²Œ ì‹ ê¸°í–ˆì–´ìš”
function max(first = -Infinity, ...rest) {
  // restëŠ” ëŒ€ì‘ë˜ëŠ” ì¸ìê°€ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´ì…ë‹ˆë‹¤.
  let maxVal = first;
  for (let n of rest) maxVal = maxVal < n ? n : maxVal;
  return maxVal;
}

console.log(max(3, 1, 4, 1, 5, 9, 2));
```

Spread operatorë¥¼ ì‚¬ìš©í•œ ì¬ë°ŒëŠ” ì˜ˆì‹œ:

```js
function timed(f) {
  return function (...args) {
    console.log(`Entering ${f.name}`);
    let startTime = performance.now();
    try {
      return f(...args);
    } finally {
      // finallyë¬¸ìœ¼ë¡œ ì²˜ë¦¬í–ˆê¸°ì— fì—ì„œ ì—ëŸ¬ë¥¼ ë˜ì ¸ë„ ê´œì°®ìŠµë‹ˆë‹¤.
      console.log(`Exiting ${f.name} after ${performance.now() - startTime}ms`);
    }
  };
}

let fibo = (n) => (n <= 2 ? 1 : fibo(n - 1) + fibo(n - 2));

let fibo2 = (n) => {
  if (n <= 2) return 1;
  if (fibo2[n]) return fibo2[n];

  return (fibo2[n] = fibo2(n - 1) + fibo2(n - 2));
};

let N = 30;
timed(fibo)(N);
timed(fibo2)(N);
```

í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ì—ì„œë„ destructuringì´ ì•„ë˜ì™€ ê°™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤:

```js
function vectorAdd([x1, y1], [x2, y2]) {
  return [x1 + x2, y1 + y2];
}

console.log(vectorAdd([1, 2], [3, 4]));

let vectorMultiply = ({ x, y, z = 0 }, scalar) => ({
  x: x * scalar,
  y: y * scalar,
  z: z * scalar,
});

console.log(vectorMultiply({ x: 1, y: 2 }, 10));
```

### 4. Functions as Values

ìœ„ì˜ `fibo2` ì˜ˆì œì—ì„œ ë¯¸ë¦¬ ë³´ì—¬ë“œë ¸ì§€ë§Œ, í•¨ìˆ˜ë„ ê°ì²´ì´ë¯€ë¡œ í”„ë¡œí¼í‹°ë¥¼ ê°€ì§ˆ ìˆ˜
ìˆì–´ìš”:

```js
uniqueInteger.counter = 0;

function uniqueInteger() {
  return uniqueInteger.counter++;
}

console.log(uniqueInteger());
console.log(uniqueInteger());
```

### 5. Functions as Namespaces

> ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ í‘œí˜„(IIFE, Immediately Invoked Function Expression) ì€
> ì •ì˜ë˜ìë§ˆì ì¦‰ì‹œ ì‹¤í–‰ë˜ëŠ” Javascript Function ë¥¼ ë§í•œë‹¤.
>
> https://developer.mozilla.org/ko/docs/Glossary/IIFE

IIFEë¥¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
(function () {
  let val = 10;
  console.log('IIFE');
  // ë³€ìˆ˜ valë¡œ ì´ê²ƒì €ê²ƒ í•˜ê¸°
})();

// IIFE ë‚´ë¶€ì˜ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
console.log(val);
```

### 6. Closures

> ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ ê·œì¹™ì„ ë”°ë¥´ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ í•¨ìˆ˜ëŠ” í˜¸ì¶œ ìŠ¤íƒê³¼ ê´€ê³„ì—†ì´ ê°ê°ì˜
> (thisë¥¼ ì œì™¸í•œ) ëŒ€ì‘í‘œë¥¼ ì†ŒìŠ¤ì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ ì •ì˜í•˜ê³ , ëŸ°íƒ€ì„ì— ê·¸ ëŒ€ì‘í‘œë¥¼
> ë³€ê²½ì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.
>
> í´ë¡œì € = í•¨ìˆ˜ + í•¨ìˆ˜ë¥¼ ë‘˜ëŸ¬ì‹¼ í™˜ê²½(lexical environment)
>
> https://ui.toast.com/weekly-pick/ko_20160311

ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ í•¨ìˆ˜ ê°ì²´ëŠ” í•¨ìˆ˜ ì •ì˜ê°€ ìœ„ì¹˜í•œ ìŠ¤ì½”í”„ì— ëŒ€í•œ
ì •ë³´ë„ ê°€ì§€ê³  ìˆì–´ì•¼í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê°ì²´ì™€ ìŠ¤ì½”í”„ì˜ ì¡°í•©ì„ **í´ë¡œì €**ë¼ê³  í•´ìš”.

```js
let scope = 'global scope';

function foo() {
  let scope = 'local scope';
  return () => scope;
}

console.log(foo()());
```

ì—¬ëŸ¬ í•¨ìˆ˜ê°€ ê°™ì€ ìŠ¤ì½”í”„ë¥¼ ê³µìœ í•  ìˆ˜ë„ ìˆì–´ìš”:

```js
let createCounter = (n) => {
  return {
    // í•¨ìˆ˜ ì¸ìë„ í´ë¡œì €ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
    count: () => n++,
    reset: () => (n = 0),
  };
};

let c1 = createCounter(0),
  c2 = createCounter(10);

console.log(c1.count(), c2.count());
c1.reset();
console.log(c1.count(), c2.count());
```

varì™€ í´ë¡œì €ì˜ ì¡°í•©ìœ¼ë¡œ ë²„ê·¸ê°€ ìƒê¸´ ì½”ë“œ:

```js
// ëª©í‘œ: 0-9ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì˜ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
const foo = () => {
  let funcs = [];
  // varê°€ í•¨ìˆ˜ ë‹¨ìœ„ë¡œ ì •ì˜ë˜ì–´ iê°€ í´ë¡œì €ë“¤ê°„ì— ê³µìœ ë©ë‹ˆë‹¤.
  // var -> let ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”
  for (var i = 0; i < 10; i++) funcs[i] = () => i;
  return funcs;
};

let a = foo();
console.log(a[5]());
```

ìƒìœ„ í•¨ìˆ˜ì˜ `this`ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¡œì €ê°€ í•„ìš”í•˜ë‹¤ë©´...:

```js
let obj = {
  x: 123,
  f() {
    // âš ï¸ ì¼ë°˜ í•¨ìˆ˜ëŠ” ë°”ê¹¥ ìŠ¤ì½”í”„ì˜ thisë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    let g1 = function () {
      return this;
    };

    // âœ… ë”°ë¼ì„œ í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜,
    let g2 = () => this;

    // âœ… bindë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜,
    let g3 = g1.bind(this);

    // âœ… thisë¥¼ í´ë¡œì € ë‚´ë¶€ì˜ ë³„ë„ ë³€ìˆ˜ì— í• ë‹¹í•©ë‹ˆë‹¤.
    let self = this;
    let g4 = function () {
      return self;
    };

    // âœï¸ ë‹¤ë¥¸ g í•¨ìˆ˜ë“¤ì„ ëŒ€ì‹  ë°˜í™˜í•´ë³´ì„¸ìš”
    return g1;
  },

  toString() {
    return '[object obj]';
  },
};

console.log(String(obj.f()()));
```

### 7. Function Properties, Methods, and Constructor

```js
let sum2 = (a, b) => a + b;
let sum3 = (a, b, c) => a + b + c;
let sum = (...args) => args.reduce((prev, cur) => prev + cur, 0);

console.log(sum2.length, sum3.length, sum.length);
console.log(sum2.name);
```

ëª¨ë“  í•¨ìˆ˜ëŠ” ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œí† íƒ€ì… ê°ì²´ë¥¼ ê°€ì§‘ë‹ˆë‹¤. í•¨ìˆ˜ê°€ ìƒì„±ìë¡œ í˜¸ì¶œë˜ë©´ ìƒˆë¡œ
ìƒê¸´ ê°ì²´ëŠ” ì´ í”„ë¡œí† íƒ€ì… ê°ì²´ë¥¼ ìƒì†ë°›ìŠµë‹ˆë‹¤:

```js
function f() {}
function g() {}

console.log(f.prototype, g.prototype, f.prototype === g.prototype);

let a = new f();
let b = new g();
console.log(Object.getPrototypeOf(a) === f.prototype);
```

`call`ê³¼ `apply` ë©”ì„œë“œëŠ” í•¨ìˆ˜ê°€ ë‹¤ë¥¸ ê°ì²´ì˜ ë©”ì„œë“œì¸ ê²ƒì²˜ëŸ¼ ë™ì‘í•˜ê²Œ í•´ìš”:

```js
function f() {
  console.log(this);
}

let o = { x: 123 };

f();
f.call(o, 1, 2);
f.apply(o, [1, 2]);
```

`bind`ëŠ” í•¨ìˆ˜ ë‚´ this í‚¤ì›Œë“œì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ì§€ì •í•˜ê³  ì¸ì ì¼ë¶€ë¥¼ ì œê³µí•  ìˆ˜
ìˆì–´ìš”:

```js
// this ê°ì²´ ì§€ì •í•˜ê¸°
let obj1 = { x: 123 };
let obj2 = { x: 456 };
function f() {
  console.log(this.x);
}

let boundf1 = f.bind(obj1);
// âš ï¸ í•œ ë²ˆ bindëœ í•¨ìˆ˜ëŠ” override í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤
let boundf2 = f.bind(obj1).bind(obj2);
boundf1();
boundf2();

// ì¸ì ì¼ë¶€ë¥¼ ë¯¸ë¦¬ ì œê³µí•˜ê¸°
let sum = (x, y) => x + y;
let inc = sum.bind(null, 1);
console.log(inc(10));

// í•¨ìˆ˜ ì´ë¦„ë„ ë°”ë€Œì–´ìš”
console.log(inc.name);
console.log(inc.bind().bind().bind().bind().name);
```

Function ìƒì„±ìë¡œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³  ì „ì—­ í•¨ìˆ˜ì¸ ê²ƒì²˜ëŸ¼ ë™ì‘í•©ë‹ˆë‹¤:

```js
let sum = new Function('x', 'y', 'return x+y');
console.log(sum(1, 2));
```

### 8. Functional Programming

**ê³ ì°¨ í•¨ìˆ˜**(Higher order function)ëŠ” í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ”
í•¨ìˆ˜ì…ë‹ˆë‹¤:

```js
// ê³ ì°¨í•¨ìˆ˜ ì˜ˆì‹œ
function not(f) {
  return function (...args) {
    // âš ï¸ return !f(args)
    return !f.apply(this, args);
  };
}

Array.prototype.isEmpty = function () {
  return this.length === 0;
};

Array.prototype.notEmpty = not(Array.prototype.isEmpty);

console.log([].isEmpty(), [].notEmpty());
console.log([1].isEmpty(), [1].notEmpty());
```

í•©ì„±í•¨ìˆ˜ ì˜ˆì œ:

```js
function compose(f, g) {
  return function (...args) {
    // ğŸ¤” ì™œ í•˜ë‚˜ëŠ” callì´ê³  í•˜ë‚˜ëŠ” applyì¸ì§€ ê³ ë¯¼í•´ë³´ì„¸ìš”
    return f.call(this, g.apply(this, args));
  };
}

const sum = (x, y) => x + y;
const square = (x) => x * x;
console.log(compose(square, sum)(2, 3));
```

## 9. Classes

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” í”„ë¡œí† íƒ€ì… ê¸°ë°˜ ìƒì†ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 1. Classes and Prototypes

range ê°ì²´ë¥¼ ìƒì„±í•´ ë°˜í™˜í•˜ëŠ” íŒ©í† ë¦¬ í•¨ìˆ˜ ì˜ˆì œì…ë‹ˆë‹¤. í”„ë¡œí† íƒ€ì…ì„ ì—°ê²°í•˜ëŠ”
ê³¼ì •ì´ ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ìš”:

```js
function createRange(from, to) {
  // í”„ë¡œí† íƒ€ì… ê°ì²´ë¥¼ ì¸ìë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
  let r = Object.create(createRange.methods);
  r.from = from;
  r.to = to;
  return r;
}

// í”„ë¡œí† íƒ€ì… ê°ì²´ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
createRange.methods = {
  includes(x) {
    return this.from <= x && x < this.to;
  },
};

let r = createRange(1, 4);
console.log(r.includes(2), r.includes(5));
```

### 2. Classes and Constructors

`new` í‚¤ì›Œë“œë¡œ ê°ì²´ì˜ ìƒì„±ê³¼ í”„ë¡œí† íƒ€ì… ì—°ê²°ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```js
function Range(from, to) {
  if (!new.target) throw new Error('ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ì—ˆì–´ìš”');
  this.from = from;
  this.to = to;
}

Range.prototype = {
  includes(x) {
    return this.from <= x && x < this.to;
  },
};

// âœï¸ newë¥¼ ì§€ì›Œë³´ì„¸ìš”
let r = new Range(1, 4);
console.log(r.includes(2), r.includes(5));
```

ì„œë¡œ ë‹¤ë¥¸ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆì–´ë„ ë‘ ìƒì„±ì í•¨ìˆ˜ê°€ ê°™ì€ `prototype` í”„ë¡œí¼í‹°ë¥¼
ê°€ì§„ë‹¤ë©´ ê°™ì€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì·¨ê¸‰ë©ë‹ˆë‹¤. ë‹¤ë¥´ê²Œ ë§í•˜ë©´ ê°ì²´ê°€ ì •í™•íˆ ì–´ë–¤
ìƒì„±ìë¥¼ ì‚¬ìš©í•´ ë§Œë“¤ì—ˆëŠ”ì§€ `instanceOf`ë¡œëŠ” ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:

```js
function A() {}
function B() {}
A.prototype = B.prototype = {};

let a = new A();
let b = new B();
console.log(a instanceof A, a instanceof B);
console.log(b instanceof A, b instanceof B);

// ì´ëŸ° í•¨ìˆ˜ë„ ìˆë„¤ìš”.
// createRange ì˜ˆì œì²˜ëŸ¼ ìƒì„±ì í•¨ìˆ˜ê°€ ì—†ëŠ” ê²½ìš°ëŠ”
// ì•„ë˜ ë°©ë²•ìœ¼ë¡œ í”„ë¡œí† íƒ€ì…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
console.log(A.prototype.isPrototypeOf(a));
```

ì •í™•í•œ ìƒì„±ìê°€ ê¶ê¸ˆí•˜ë‹¤ë©´ `constructor` í”„ë¡œí¼í‹°ë¥¼ í™œìš©í•  ìˆ˜ ìˆì–´ìš”:

```js
function A() {}
let a = new A();

console.log(A === A.prototype.constructor);
console.log(A === a.constructor);
```

ë”°ë¼ì„œ í”„ë¡œí† íƒ€ì… ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“¤ì—ˆë‹¤ë©´ `constructor` í”„ë¡œí¼í‹°ë¥¼ ì˜
ì„¤ì •í•´ì¤˜ì•¼í•©ë‹ˆë‹¤:

```js
function A() {}

// ë°©ë²• 1
A.prototype = {
  constructor: A,
  foo() {
    console.log('foo');
  },
};

function B() {}

// ë°©ë²• 2
B.prototype.foo = function () {
  console.log('foo');
};

console.log(new A().constructor === A, new B().constructor === B);
```

### 3. Classes with the class keyword

ES6ì— ì¶”ê°€ëœ `class` ë¬¸ë²•ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤:

```js
class Range {
  constructor(from, to) {
    this.from = from;
    this.to = to;
  }

  includes(x) {
    return this.from <= x && x < this.to;
  }
}
let r = new Range(1, 4);
console.log(r.includes(2), r.includes(5));
```

í´ë˜ìŠ¤ì˜ ë³¸ë¬¸ì€ ìë™ìœ¼ë¡œ strict modeê°€ ì ìš©ë˜ë©°, í´ë˜ìŠ¤ ì„ ì–¸ì€ í•¨ìˆ˜ ì„ ì–¸ê³¼
ë‹¤ë¥´ê²Œ í˜¸ì´ìŠ¤íŒ…ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

static ë©”ì„œë“œëŠ” í”„ë¡œí† íƒ€ì… ê°ì²´ê°€ ì•„ë‹Œ í•¨ìˆ˜ ìì²´ì— ì¶”ê°€ë©ë‹ˆë‹¤.

```js
class A {
  static foo() {
    console.log('foo');
  }
}

console.log('foo' in A, 'foo' in A.prototype);
```

ë¹„êµì  ìµœê·¼ì— ë©”ì„œë“œê°€ ì•„ë‹Œ í”„ë¡œí¼í‹°ë„ í´ë˜ìŠ¤ ë³¸ë¬¸ì—ì„œ ì´ˆê¸°í™”í•  ìˆ˜ ìˆê²Œ
ë˜ì—ˆìŠµë‹ˆë‹¤:

```js
class Buffer {
  static val = 10;

  // private instance field
  // (protected ì ‘ê·¼ì œì–´ìëŠ” JSì— ë”°ë¡œ ì—†ìŠµë‹ˆë‹¤)
  #size = 0;

  // âœï¸ ì•„ë˜ ë‘ ì¤„ì˜ ìˆœì„œë¥¼ ë°”ê¿”ë³´ì„¸ìš”
  // ê²°ê³¼ê°€ ë‹¬ë¼ì§€ëŠ” ì´ìœ ëŠ” ë’¤ì— ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ìˆœì„œë¥¼ ë‹¤ë£° ë•Œ ì„¤ëª…í• ê²Œìš”
  capacity = 4096;
  buffer = new Uint8Array(this.capacity);

  constructor() {
    console.log(this.buffer.length);
  }
}

console.log(Buffer.val);
new Buffer();
```

### 4. Adding Methods to Existing Classes

í”„ë¡œí† íƒ€ì… ê°ì²´ë¥¼ ìˆ˜ì •í•´ í´ë˜ìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
// âœï¸ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê³  ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”
Number.prototype.tree = function () {
  let n = this.valueOf();
  for (let i = 1; i <= n; i++) console.log('*'.repeat(i));
};

(3).tree();
```

ë‹¤ë§Œ ìœ„ ì˜ˆì œì²˜ëŸ¼ ë¹ŒíŠ¸ì¸ ê°ì²´ë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì€ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ì˜, í˜¹ì€ JS
ë²„ì „ê°„ì˜ ì¶©ëŒì´ ìˆì„ ìˆ˜ ìˆì–´ ì¢‹ì§€ ì•ŠìŠµë‹ˆë‹¤.

### 5. Subclasses

ES6 ì´ì „ ë°©ì‹:

```js
function Range(from, to) {
  this.from = from;
  this.to = to;
}

Range.prototype = {
  includes(x) {
    return this.from <= x && x < this.to;
  },
  constructor: Range,
};

function Span(start, span) {
  // ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì— í˜¸í™˜ë˜ë„ë¡ ìì‹ í´ë˜ìŠ¤ì—ì„œë„ ì´ˆê¸°í™”ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤.
  // ES6 ì „ê¹Œì§€ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë‚˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ë²•(super)ì„ ì œê³µí•˜ì§€ ì•Šê¸°ì—
  // ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì„ ì •í™•íˆ ì•Œì•„ì•¼í•©ë‹ˆë‹¤.
  this.from = start;
  this.to = start + span;
}

// â­ ì•„ë˜ ì¤„ì„ ì´í•´í•´ë³´ì„¸ìš”
Span.prototype = Object.create(Range.prototype);
Span.prototype.constructor = Span;

console.log(new Span(5, 5).includes(8));
```

`extends`ì™€ `super`ë¥¼ ì‚¬ìš©í•´ ì„œë¸Œí´ë˜ìŠ¤ ë§Œë“¤ê¸°:

```js
class Range {
  constructor(from, to) {
    this.from = from;
    this.to = to;
  }
  includes(x) {
    return this.from <= x && x < this.to;
  }
}

class Span extends Range {
  constructor(start, span) {
    super(start, start + span);
  }
}

console.log(new Span(5, 5).includes(8));
```

ì—¬ë‹´ìœ¼ë¡œ í´ë˜ìŠ¤ í‘œí˜„ì‹ì„ ì‚¬ìš©í•´ ì•„ë˜ì™€ ê°™ì€ í‘œê¸°ë„ ê°€ëŠ¥í•˜ê¸´ ê°€ëŠ¥í•©ë‹ˆë‹¤:

```js
class Span extends class {
  constructor(from, to) {
    this.from = from;
    this.to = to;
  }
  includes(x) {
    return this.from <= x && x < this.to;
  }
} {
  constructor(start, span) {
    super(start, start + span);
  }
}

console.log(new Span(5, 5).includes(8));
```

`extends`ë¥¼ ì‚¬ìš©í•˜ë©´ static ë©”ì„œë“œë„ ì•Œì•„ì„œ ìƒì†ë©ë‹ˆë‹¤. ì´ëŸ° ê¸°ëŠ¥ì€ ES6 ì´ì „ì—ëŠ”
ë¶ˆê°€ëŠ¥í–ˆì–´ìš”:

```js
class A {
  static foo() {}
}

class B extends A {}

console.log(A.foo === B.foo);
```

ê°‘ìê¸° ìƒê°ë‚œ ì˜ˆì œ:

```js
class A {
  static toString() {
    return 'class';
  }
  toString() {
    return 'instance';
  }
}

console.log(String(A));
console.log(String(new A()));
```

ì±…ì—ëŠ” ì—†ì—ˆì§€ë§Œ í´ë˜ìŠ¤ ì„ ì–¸ê³¼ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„± ê³¼ì •ì´ ê¶ê¸ˆí•´ì„œ ì°¾ì•„ë´¤ì–´ìš”. ìš°ì„ 
í´ë˜ìŠ¤ ì„ ì–¸ë¬¸ì˜ í‰ê°€ ìˆœì„œì…ë‹ˆë‹¤:

```js
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#evaluation_order

// 1ï¸âƒ£ extendsê°€ ìˆë‹¤ë©´ ìƒì„±ì í•¨ìˆ˜ê°€ ë§ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
// âœï¸ ì£¼ì„ì„ í•´ì œí•˜ê³  ì–´ë–¤ ì—ëŸ¬ê°€ ëœ¨ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”
class A /* extends 1 */ {
  // 2ï¸âƒ£ constructor ë©”ì„œë“œë¥¼ extract(?)í•˜ê³  ì—†ë‹¤ë©´ ê¸°ë³¸ êµ¬í˜„ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤.
  constructor() {}

  // 3ï¸âƒ£ í”„ë¡œí¼í‹° 'í‚¤'ë“¤ì„ ì„ ì–¸ ìˆœì„œëŒ€ë¡œ í‰ê°€í•©ë‹ˆë‹¤.

  // 4ï¸âƒ£ ë©”ì„œë“œì™€ ì ‘ê·¼ìë¥¼ ì„ ì–¸ ìˆœì„œëŒ€ë¡œ installí•©ë‹ˆë‹¤.

  // <ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ>ëŠ” prototypeì—,
  method1() {}

  // <private ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ>ëŠ” ë‚˜ì¤‘ì— ì¸ìŠ¤í„´ìŠ¤ì— ì§ì ‘,
  #method2() {}

  // <static ë©”ì„œë“œ>ëŠ” í´ë˜ìŠ¤ ìì²´ì— installë©ë‹ˆë‹¤.
  static method3() {}

  // 5ï¸âƒ£ ì´ì œë¶€í„° í´ë˜ìŠ¤ Aì˜ ì´ë¦„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  // ì´ì „ ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•˜ë©´ ReferenceErrorê°€ ë°œìƒí•©ë‹ˆë‹¤.
  // âœï¸ ë§¨ ì•„ë˜ logged í•¨ìˆ˜ì˜ ì£¼ì„ì„ í•´ì œí•´ë³´ì„¸ìš”

  // 6ï¸âƒ£ í”„ë¡œí¼í‹° 'ê°’'ë“¤ì´ í‰ê°€ë©ë‹ˆë‹¤

  // <static í•„ë“œ>ì˜ 'ê°’'ì´ í‰ê°€ë  ë•Œ thisëŠ” í´ë˜ìŠ¤ ìì²´ì…ë‹ˆë‹¤.
  static [logged('key1')] = logged('val1');
  static [logged('key2')] = (() => {
    console.log(A === this);
    // ğŸ¤” ì™œ ì–´ë–¤ê±´ undefinedê³  ì–´ë–¤ê±´ ì•„ë‹Œì§€ ê³ ë¯¼í•´ë³´ì„¸ìš”
    console.log(A.key1, A.key3, A.method3);
    return 'val2';
  })();
  static {
    console.log('Static initialization blocks', this.key2, this.key3);
  }
  static [logged('key3')] = logged('val3');

  // <ì¸ìŠ¤í„´ìŠ¤ í•„ë“œ>ì˜ 'ê°’'ë“¤ì€ ìƒì„±ì ì‹œì‘ ì „(base classì¸ ê²½ìš°) í˜¹ì€
  // superì˜ ë¦¬í„´ ì „(derived classì¸ ê²½ìš°)ì— ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
  // ìì„¸í•œê±´ ë‚˜ì¤‘ ì˜ˆì œì—ì„œ ë³¼ê²Œìš”
  [logged('key4')] = logged('val4');
}

// helper function
function logged(val) {
  // console.log(A);
  console.log(`log: ${val}`);
  return val;
}

// 7ï¸âƒ£ ë!
```

ì°¸ê³ ë¡œ, ìœ„ ì½”ë“œì—ì„œ ë“±ì¥í•œ **static initialization blocks**ì€ í´ë˜ìŠ¤ì˜ ìœ ì—°í•œ
ì´ˆê¸°í™”ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤:

```js
// @noexec
// âš ï¸
class A {
  static init() {
    //
    // Access to private static fields is allowed here
  }
}

// exposes an implementation detail to the user
A.init();

// âœ…
class B {
  static {
    // ...
  }
}
```

í´ë˜ìŠ¤ ì„ ì–¸ì—ì„œ í‚¤ëŠ” í•œ ë²ˆ, ì¸ìŠ¤í„´ìŠ¤ í•„ë“œ ê°’ì€ ë§¤ë²ˆ í‰ê°€ë¨ì´ ì¸ìƒê¹Šì–´ì„œ ì•„ë˜
ì˜ˆì œë¥¼ ë§Œë“¤ì–´ë´¤ì–´ìš”:

```js
class A {
  [randomVal()] = randomVal();

  toString() {
    return JSON.stringify(this);
  }
}

// í‚¤ê°€ í•­ìƒ ê°™ìŠµë‹ˆë‹¤
console.log(new A(), new A(), new A());

// helper function
function randomVal() {
  return Math.floor(Math.random() * 10);
}
```

ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„± ê³¼ì • ì˜ˆì œì…ë‹ˆë‹¤:

```js
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/constructor

class A {
  x = logged(123);

  constructor() {
    // thisë¡œ ìƒì„±ì¤‘ì¸ ê°ì²´, new.targetìœ¼ë¡œ ìƒì„±ì í•¨ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    // í”„ë¡œí† íƒ€ì… ì²´ì¸ì´ ì—°ê²°ë˜ì–´ìˆê³  ìì‹ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë„ ë‹¤ ìˆê¸°ì—  String(this)ê°€ Bì…ë‹ˆë‹¤.
    // í´ë˜ìŠ¤ê°€ ì˜ ì„¤ê³„ë˜ì—ˆë‹¤ë©´ ë¶€ëª¨ìª½ì—ì„œ ìì‹ ìª½ ìƒì„±ìë¥¼ ê¶ê¸ˆí•´í•  ì´ìœ ê°€ ì—†ì§€ë§Œ
    // ë””ë²„ê¹…ë“±ë“±ì— ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤ë„¤ìš”.
    console.log(String(this), String(new.target));

    // í•˜ì§€ë§Œ ìì‹ í´ë˜ìŠ¤ì˜ í”„ë¡œí¼í‹°ëŠ” ì•„ì§ ì—†ìŠµë‹ˆë‹¤
    console.log(this.y);
  }

  static toString() {
    return 'class A';
  }

  toString() {
    return 'instance of A';
  }
}

class B extends A {
  y = logged(456);

  constructor() {
    // 1ï¸âƒ£ super ì´ì „ì˜ ìƒì„±ì ë³¸ë¬¸ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.
    // ì•„ì§ì€ this ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
    console.log('Before super');

    // 2ï¸âƒ£ superê°€ í˜¸ì¶œë˜ì–´ ë¶€ëª¨ í´ë˜ìŠ¤ ë¶€ë¶„ì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    // 3ï¸âƒ£ ì´í›„ í˜„ì¬ í´ë˜ìŠ¤ í•„ë“œë“¤ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
    super();

    // 4ï¸âƒ£ super ì´í›„ì˜ ìƒì„±ì ë³¸ë¬¸ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.
    // ì´ì œ thisë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    console.log('After super');
    console.log(this.y);
  }

  static toString() {
    // ìƒì„±ìê°€ ì•„ë‹Œ ì¼ë°˜ ë©”ì„œë“œì—ëŠ” `super`ì— ëŒ€í•œ ì œì•½ì´ ì—†ìŠµë‹ˆë‹¤
    // ë¶€ëª¨ í´ë˜ìŠ¤ ë²„ì „ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ë„, í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.
    console.log(super.toString());
    return 'class B';
  }

  toString() {
    return 'instance of B';
  }
}

new B();

// helper function
function logged(val) {
  console.log(`log: ${val}`);
  return val;
}
```

ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜(composition)ì„ ì„ í˜¸í•˜ë¼ëŠ” ë§ë„ ìˆìŠµë‹ˆë‹¤:

https://en.wikipedia.org/wiki/Composition_over_inheritance

JSê°€ abstract methodë‚˜ abstract classë¥¼ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ëŠ” ì•Šì§€ë§Œ ì•„ë˜ì™€ ê°™ì´
í‰ë‚´ëŠ” ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```js
// @noexec
class AbstractSet {
  has(x) {
    throw new Error('Abstract method');
  }
}
```

ì—¬ë‹´ìœ¼ë¡œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ abstract classë¥¼ ë”°ë¡œ ì§€ì›í•©ë‹ˆë‹¤:

https://www.typescriptlang.org/docs/handbook/classes.html#abstract-classes

í”„ë¡œí† íƒ€ì… ê°ì²´ì™€ ìƒì„±ì í•¨ìˆ˜ì˜ ê´€ê³„ë¥¼ ì˜ ë³´ì—¬ì£¼ëŠ” ì±… ì›ë¬¸ìœ¼ë¡œ ì±•í„°ë¥¼
ë§ˆë¬´ë¦¬í• ê²Œìš”:

> Although the prototype object is the key feature of the class, the constructor
> function is the public identity of the class. @/components/ImageViewer
